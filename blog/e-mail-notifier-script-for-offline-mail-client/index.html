<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="Restu Purnomo">
<meta name="description" content="hello and welcome to another cheap ass script writing series to keep this blog somewhat alive. and well here is how to create simple yet easy mail notifier script using wendy &#43; lemonbar
 first you need to set up your offline mail client(well ofcourse)
 go fetch wendy and install/compile it whatever
 create the pop-up script with lemonbar :
  #!/bin/bash # ### prevent a stacking notifications # we&#39;re gonna use wendy to automatically launch script &quot;everytime&quot;- # a mail was being fetched into a maildir.">

<meta property="og:title" content="E-mail notifier script for offline mail client" />
<meta property="og:description" content="hello and welcome to another cheap ass script writing series to keep this blog somewhat alive. and well here is how to create simple yet easy mail notifier script using wendy &#43; lemonbar
 first you need to set up your offline mail client(well ofcourse)
 go fetch wendy and install/compile it whatever
 create the pop-up script with lemonbar :
  #!/bin/bash # ### prevent a stacking notifications # we&#39;re gonna use wendy to automatically launch script &quot;everytime&quot;- # a mail was being fetched into a maildir." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://okiptkn.github.io/blog/e-mail-notifier-script-for-offline-mail-client/" />



<meta property="article:published_time" content="2018-04-27T20:26:43&#43;07:00"/>

<meta property="article:modified_time" content="2018-04-27T20:26:43&#43;07:00"/>












<title>


     E-mail notifier script for offline mail client 

</title>
<link rel="canonical" href="https://okiptkn.github.io/blog/e-mail-notifier-script-for-offline-mail-client/">







<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://okiptkn.github.io/css/reset.css?t=2018-04-28%2000%3a30%3a20.992540085%20%2b0700%20WIB%20m%3d%2b0.089449619">
    <link rel="stylesheet" href="https://okiptkn.github.io/css/pygments.css?t=2018-04-28%2000%3a30%3a20.992540085%20%2b0700%20WIB%20m%3d%2b0.089449619">
    <link rel="stylesheet" href="https://okiptkn.github.io/css/main.css?t=2018-04-28%2000%3a30%3a20.992540085%20%2b0700%20WIB%20m%3d%2b0.089449619">
    
        <link rel="stylesheet" href="https://okiptkn.github.io/css/override.css?t=2018-04-28%2000%3a30%3a20.992540085%20%2b0700%20WIB%20m%3d%2b0.089449619">
    




<link rel="shortcut icon"

    href="https://okiptkn.github.io/img/coffee.ico"

>








</head>


<body lang="en">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <a href="https://okiptkn.github.io/"><img class="avatar" src="https://okiptkn.github.io/img/bike2smol.png" srcset="https://okiptkn.github.io/img/bike2smol.png 1x"></a>
            
            <a href="https://okiptkn.github.io/"><div class="name">Restu Purnomo</div></a>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://okiptkn.github.io/blog/"><span>Blog</span></a></li>
                    
                        <li class="nav-about"><a href="https://okiptkn.github.io/about/"><span>About</span></a></li>
                    
                        <li class="nav-css"><a href="https://okiptkn.github.io/css/"><span>CSS</span></a></li>
                    
                        <li class="nav-separator"><a href="https://okiptkn.github.io/"><span>|</span></a></li>
                    
                        <li class="nav-gallery"><a href="https://okiptkn.github.io/gallery/"><span>go to Gallery</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/okiptkn" target="_blank" rel="noopener"><img class="icon" src="https://okiptkn.github.io/img/github.svg" alt="github" /></a>
        

        

	

        

        

        

        
            <a href="//fb.me/okipotemkin" target="_blank" rel="noopener"><img class="icon" src="https://okiptkn.github.io/img/facebook.svg" alt="facebook" /></a>
        

        

        

        

        
            <a href="//kaskus.co.id/profile/6378267" target="_blank" rel="noopener"><img class="icon" src="https://okiptkn.github.io/img/kaskus.svg" alt="kaskus" /></a>
        

        
            <a href="mailto:restu[dot]okky[at]gmail[dot]com"><img class="icon" src="https://okiptkn.github.io/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    E-mail notifier script for offline mail client

</div>

                    <div class="initials"><a href="https://okiptkn.github.io/">ad</a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Fri Apr 27 2018 48:278:43 WIB'>Apr 27, 2018</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>2 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                <p>hello and welcome to another cheap ass script writing series to keep this blog somewhat alive.
and well here is how to create simple yet easy mail notifier script using <code>wendy</code> + <code>lemonbar</code></p>

<ul>
<li><p>first you need to set up your offline mail client(well ofcourse)</p></li>

<li><p>go fetch <a href="https://github.com/z3bra/wendy">wendy</a> and install/compile it whatever</p></li>

<li><p>create the pop-up script with <code>lemonbar</code> :</p></li>
</ul>

<pre><code>#!/bin/bash
#

### prevent a stacking notifications 
    # we're gonna use wendy to automatically launch script &quot;everytime&quot;-
    # a mail was being fetched into a maildir.
    # this will exit the script if the previous one is still running
for pid in $(pidof -x mailnotifier); do
    if [ $pid != $$ ]; then
        sleep 0.1
        exit 0;
    fi
done

### set some variables
_popname=&quot;mailnotifier&quot;
_micon=&quot;   ïƒ *  &quot;
_ficon=&quot;FontAwesome:style=Regular:size=12&quot;
_cyan=&quot;#6BC2B7&quot;

_numail() {
    ## count only recently fetched email that's under 1min period of time
        # meaning the counter will reset to zero after 1min
    _counter=&quot;$(find /your/mail/dir/INBOX/new/* -mmin -1 | wc -l)&quot;
    echo -e &quot;%{l}        You've got %{F$_cyan}${_counter}%{F-} new mail&quot;
}

_main() {
        
        # loop so that the &quot;counter&quot; will get updated on each new mail fetched
    while true ; do
        echo -e &quot;%{l}$(_numail)%{r}%{B$_cyan}${_micon}%{B-}&quot;
        sleep 1
    done |\
            # pipe it to lemon
        lemonbar -d -n &quot;${_popname}&quot; -g 210x40+20+90 -f &quot;PT Sans Narrow:style=Bold:size=12&quot; -f &quot;$_ficon&quot; -F &quot;#27292A&quot; -B &quot;#E3E3E3&quot;
}

### call the main function
_main&quot;$@&quot;
</code></pre>

<ul>
<li>now create another script for wendy to automatically call the pop-up script above. (run this one in the background)</li>
</ul>

<pre><code>#!/bin/bash
#

# set wendy to watch for file creation [256] and file moved_to [128] event- 
# inside your maildir and check for any event on 1 second interval, 
# then run the pop-up script above and exit after 20 second

wendy -m 384 -f ~/path/to/yourmaildir/INBOX/new -t 1 timeout 20s mailnotifier
</code></pre>

                <br>
		<p class="back-to-posts"><a href="https://okiptkn.github.io/blog/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "okiptkn" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
            
        </div>
    </div>
</section>






<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-115458953-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>





</body>
</html>

